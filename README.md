# RailsAdminGlobalizeField

  RailsAdminGlobalizeField adds tabbed interface to [rails_admin](https://github.com/sferik/rails_admin) for multilingual models (using [globalize](https://github.com/globalize/globalize) gem)

  It adds custom field type that you can use for globalize translations association.

  This gem uses Translation models generated by globalize, so you don't need to add any additional model to your app (as some older globalize3 gists suggested).

## Installation

Add and configure globalize gem first.
``` ruby
  gem 'globalize', '~> 4.0'
```


Add this line to your application's Gemfile:
``` ruby
  gem 'rails_admin_globalize_field'
```

And then execute:

    $ bundle

Or install it yourself as:

    $ gem install rails_admin_globalize_field

## Usage

Add **translation** models to `config.included_models` in `initializers/rails_admin.rb`:
``` ruby
  config.included_models = ['Model','Model::Translation']
```

Add `accepts_nested_attributes_for` for translations to your **translated** model.

> `accepts_nested_attributes_for` sets `autosave` association option to **true**.  
> It forces ActiveRecord to save translations on save (default globalize logic is to use after_create callback for that).  
> As a result, it adds empty association records on create into database, and then updates it inside after_create callback.  
> It leads to inability to use `null: false` columns without default values in translations table.  
> See: https://github.com/globalize/globalize/issues/325

``` ruby
  class Model < ActiveRecord::Base
    translates :title, :desc
    accepts_nested_attributes_for :translations, :allow_destroy => true
  end
```

Add configuration to associated **translation** model:
``` ruby
  config.model 'Model::Translation' do
    visible false
    configure :locale, :hidden
    include_fields :locale, :title, :desc
  end
```
`:locale` field is always required.


Add additional stylesheet in app/assets/stylesheets/rails_admin/theming.scss:
``` ruby
  /*
   *= require rails_admin/ra.globalize_tabs
  */
```



## Screenshot

![Screenshot](https://raw.github.com/scarfaceDeb/rails_admin_globalize_field/screenshots/screenshots/shot1.png)

## Contributing

1. Fork it
2. Create your feature branch (`git checkout -b my-new-feature`)
3. Commit your changes (`git commit -am 'Add some feature'`)
4. Push to the branch (`git push origin my-new-feature`)
5. Create new Pull Request
